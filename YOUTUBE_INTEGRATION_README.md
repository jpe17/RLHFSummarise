# YouTube Integration for SocialAI

This document explains how to use the new YouTube video summarization feature integrated into the SocialAI application.

## Overview

The YouTube integration allows you to:
- Download audio from YouTube videos
- Transcribe the audio using Whisper models
- Generate AI summaries using the LoRA fine-tuned model
- Extract key topics from the content
- Optionally generate audio narration of the summary

## Features

### ðŸŽ¥ Video Processing
- Supports all YouTube video formats
- Automatic audio extraction
- Progress tracking with real-time updates

### ðŸŽ¯ AI Summarization
- Uses LoRA fine-tuned Qwen1.5-0.5B model
- Intelligent text chunking for long videos
- Context-aware summarization

### ðŸŽµ Audio Synthesis (Optional)
- Voice cloning for summary narration
- Multiple voice options available
- Automatic audio generation

### ðŸ“Š Content Analysis
- Key topic extraction with relevance scores
- Transcription with timestamps
- Detailed processing metadata

## Usage

### 1. Start the Application

```bash
python modular_app.py
```

The application will be available at `http://localhost:5464`

### 2. Initialize the Pipeline

1. Open the web interface
2. Click "ðŸš€ Initialize Pipeline" to load all AI models
3. Wait for initialization to complete

### 3. Use YouTube Summarizer

1. Click the "ðŸŽ¥ YouTube Summarizer" tab
2. Paste a YouTube URL in the input field
3. Configure options:
   - **Voice**: Select a voice for audio narration (optional)
   - **Whisper Model**: Choose transcription accuracy vs speed
   - **Use GPU**: Enable for faster processing (if available)
4. Click "ðŸŽ¥ Process YouTube Video"

### 4. View Results

The processing will show:
- **Transcription**: Full text transcript of the video
- **AI Summary**: Condensed summary generated by LoRA model
- **Key Topics**: Main topics with relevance scores
- **Analysis Info**: Processing metadata and statistics
- **Audio**: Generated narration (if voice selected)

## API Endpoints

### Validate YouTube URL
```http
POST /api/youtube/validate
Content-Type: application/json

{
  "youtube_url": "https://www.youtube.com/watch?v=..."
}
```

### Process YouTube Video
```http
POST /api/youtube/process
Content-Type: application/json

{
  "youtube_url": "https://www.youtube.com/watch?v=...",
  "voice_name": "deniro",
  "whisper_model": "base",
  "use_gpu": false
}
```

### Check Processing Status
```http
GET /api/status/{job_id}
```

## Configuration

### Whisper Models
- **Base**: Fastest, good for short videos
- **Small**: Balanced speed and accuracy
- **Medium**: Higher accuracy, slower
- **Large**: Best accuracy, slowest

### Voice Options
Available voices depend on your voice collection in the `voices/` directory.

## Technical Details

### Dependencies
- `yt-dlp`: YouTube video downloading
- `faster-whisper`: Audio transcription
- `torch`: LoRA model inference
- `transformers`: Qwen model loading

### File Structure
```
â”œâ”€â”€ video-to-text-lora.py      # Core YouTube processing
â”œâ”€â”€ modular_app.py             # Flask app with YouTube endpoints
â”œâ”€â”€ templates/index.html       # UI with YouTube tab
â”œâ”€â”€ temp/                      # Temporary audio files
â”œâ”€â”€ audio_content/             # Downloaded YouTube audio
â”œâ”€â”€ transcriptions/            # Generated transcriptions
â””â”€â”€ outputs/                   # Generated audio summaries
```

### Processing Pipeline
1. **Download**: Extract audio from YouTube video
2. **Transcribe**: Convert audio to text using Whisper
3. **Summarize**: Generate summary using LoRA model
4. **Analyze**: Extract topics and metadata
5. **Synthesize**: Generate audio narration (optional)

## Troubleshooting

### Common Issues

1. **"LoRA summarizer not initialized"**
   - Check that `video-to-text-lora.py` is in the project root
   - Verify LoRA weights file exists at `rlhf_summarizer/simple_ppo_lora_final_20250716_130239.pt`

2. **"Invalid YouTube URL"**
   - Ensure URL is in correct format
   - Check video is publicly accessible

3. **"Processing timeout"**
   - Try smaller Whisper model
   - Check internet connection for video download

4. **"Audio generation failed"**
   - Verify voice files exist in `voices/` directory
   - Check TTS model initialization

### Performance Tips

- Use GPU acceleration when available
- Choose appropriate Whisper model size
- Process shorter videos for faster results
- Close other applications to free up memory

## Testing

Run the test script to verify integration:

```bash
python test_youtube_integration.py
```

This will test URL validation and basic processing functionality.

## Limitations

- Requires internet connection for video download
- Processing time scales with video length
- GPU memory requirements for large models
- YouTube terms of service compliance required

## Future Enhancements

- Batch processing for multiple videos
- Custom LoRA model training interface
- Advanced topic clustering
- Multi-language support
- Video thumbnail generation 